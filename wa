writer acquire
{
lock_acquire(writer_lock)
writer_waiting++
lock_release(writer_lock)

lock_acquire(reader_lock);
if(readers_waiting>.0){
	cv_wait(reader_cv,reader_lock)	;
}
lock_release(reader_lock);
resource.P();
writer_waiting--;
}
